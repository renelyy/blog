# HTTP 常见面试题

## 1. 如何理解 OSI 七层模型？

> OSI 七层模型（OSI Reference Model）是开放系统互联（Open Systems Interconnection）的缩写，是一个<b>分层的网络架构模型，用于描述和标准化网络通信</b>。它将网络通信分为七个不同的层次，每一层都有特定的功能和服务。通过这种分层结构，可以使不同的网络设备和协议能够互相通信。

1. <b>应用层</b>（Application Layer）

   - 功能：提供网络服务和应用接口，直接与用户交互。常见的协议和服务包括 `HTTP`、`FTP`、`SMTP` 等。
   - 设备：通常在软件中实现，不需要特殊硬件设备。

2. <b>表示层</b>（Presentation Layer）

   - 功能：负责数据的格式化和翻译，处理数据加密、解密、压缩、解压缩等。它确保不同系统之间的数据可以互相理解。
   - 设备：通常在软件中实现，不需要特殊硬件设备。

3. <b>会话层</b>（Session Layer）

   - 功能：管理和控制应用程序之间的对话（会话），建立、维护和终止会话，支持对话的同步和恢复。
   - 设备：通常在软件中实现，不需要特殊硬件设备。

4. <b>传输层</b>（Transport Layer）

   - 功能：提供端到端的可靠数据传输服务，负责分段和重组、流量控制、错误检测与恢复。常用协议包括 `TCP` 和 `UDP`。
   - 设备：通常在软件中实现，不需要特殊硬件设备。

5. <b>网络层</b>（Network Layer）

   - 功能：负责数据包的路由选择和转发，通过 IP 地址进行逻辑寻址，决定数据包的路径。
   - 设备：路由器（Router）。

6. <b>数据链路层</b>（Data Link Layer）

   - 功能：提供点到点的数据传输，负责帧的组装和拆解、物理地址（MAC 地址）的管理、错误检测和纠正。
   - 设备：交换机（Switch）、网桥（Bridge）、网卡（Network Interface Card）。

7. <b>物理层</b>（Physical Layer）

   - 功能：负责实际的物理连接，传输原始的比特流（0 和 1），包括硬件设备（如电缆、光纤、交换机、网卡等）的规范。

   - 设备：集线器（Hub）、中继器（Repeater）、网络电缆。

::: tip
通过这个分层模型，OSI 模型帮助开发人员和网络工程师理解和设计复杂的网络架构，确保不同厂商的设备和协议能够互操作。<b>每一层都依赖于下一层的服务，并为上一层提供服务，这种分层设计使得网络系统更加模块化和灵活</b>。
:::

## 2. 如何理解 TCP/IP 协议？

> TCP/IP 协议（Transmission Control Protocol/Internet Protocol）是一套广泛使用的网络通信协议，用于连接互联网上的设备。它由多个层次的协议组成，通过分层模型实现数据传输。虽然与 OSI 七层模型有相似之处，但 TCP/IP 模型更简化，通常分为四层。

::: warning 注意

`TCP/IP` 协议不仅仅指的是 `TCP`(传输控制协议) 和 `IP`(网际协议) 两个协议，而是指一个由 `FTP`、`SMTP`、`TCP`、`UDP`、`IP` 等协议构成的协议簇

:::

1. <b>应用层</b>（Application Layer）

   - 功能：提供网络服务和应用接口，直接与用户交互。每种应用都有自己的协议。
   - 协议：

     - `HTTP`（Hypertext Transfer Protocol）：用于 Web 浏览。
     - `FTP`（File Transfer Protocol）：用于文件传输。
     - `SMTP`（Simple Mail Transfer Protocol）：用于电子邮件传输。
     - `DNS`（Domain Name System）：用于域名解析。

   - 设备：通常在软件中实现，不需要特殊硬件设备。

2. <b>传输层</b>（Transport Layer）

   - 功能：提供端到端的可靠数据传输服务，负责数据段的分组和重组、流量控制、错误检测与恢复。
   - 协议：
     - `TCP`（Transmission Control Protocol）：<b>提供可靠的、面向连接的</b>传输，确保数据的完整性和顺序。
     - `UDP`（User Datagram Protocol）：<b>提供不可靠的、无连接的</b>传输，适用于对速度要求高、但对可靠性要求低的应用。
   - 设备：通常在软件中实现，不需要特殊硬件设备。

3. <b>网络层</b>（Internet Layer）

   - 功能：负责数据包的路由选择和转发，通过 IP 地址进行逻辑寻址，决定数据包的路径，提供跨越多个网络的数据传输。
   - 协议：
     - `IP`（Internet Protocol）：负责数据包的寻址和路由。
     - `ICMP`（Internet Control Message Protocol）：用于发送错误报告和网络诊断（如 ping）。
     - `ARP`（Address Resolution Protocol）：用于将 IP 地址解析为物理地址（MAC 地址）。
   - 设备：路由器

4. <b>链路层</b>（Link Layer）

   - 功能：负责设备之间的数据传输，定义了在本地网络上如何使用物理介质传输数据，包括硬件地址（MAC 地址）的管理、帧的组装和拆解。
   - 协议：以太网（Ethernet）、Wi-Fi 等。
   - 设备：网卡、交换机、集线器。

::: tip TCP/IP 模型与 OSI 模型的比较

> TCP/IP 模型与 OSI 模型的层次划分不同，但功能上有相似之处：

- 应用层：OSI 模型的应用层、表示层、会话层在 TCP/IP 模型中合并为应用层。
- 传输层：两者都包含传输层，负责端到端的通信。
- 网络层：OSI 模型的网络层对应于 TCP/IP 模型的网络层。
- 链路层：OSI 模型的物理层和数据链路层在 TCP/IP 模型中合并为链路层。

:::

::: tip 总结
TCP/IP 协议是互联网通信的基础，通过其四个层次模型，实现了不同网络设备和应用之间的数据传输。其分层设计使得网络通信更具模块化和灵活性，每一层都有特定的协议和功能，确保数据能够可靠、有效地传输。
:::

## 3. 如何理解 UDP 和 TCP？区别？应用场景？

> TCP（Transmission Control Protocol）和 UDP（User Datagram Protocol）是两个最常用的传输层协议，它们在数据传输过程中有不同的特点和应用场景。

1. <b>`TCP`</b>（传输控制协议）

   - 特点：
     - <b>面向连接</b>：TCP 在发送数据之前必须建立连接（通过三次握手）。
     - <b>可靠传输</b>：通过确认机制、重传机制和流量控制，TCP 提供可靠的数据传输，确保数据包按顺序且无误地到达接收方。
     - <b>流量控制</b>：通过滑动窗口机制，控制发送和接收数据的速率，避免拥塞。
     - <b>拥塞控制</b>：通过慢开始、拥塞避免、快速重传和快速恢复机制，避免网络拥塞。
     - <b>数据流管理</b>：TCP 将数据流分成多个段，并确保这些段按顺序到达接收方。
   - 应用场景：适用于<b>对数据传输可靠性要求高</b>的应用，如文件传输(`FTP`)、电子邮件(`SMTP`, `IMAP`, `POP3`)、Web 浏览(`HTTP`, `HTTPS`)、远程连接(`SSH`, `Telnet`)等。

2. <b>`UDP`</b>（用户数据报协议）

   - 特点：
     - <b>无连接</b>：数据传输不需要建立连接，适用于对实时性要求高、对可靠性要求低的应用。
     - <b>不可靠传输</b>：不保证数据的完整性和顺序，不提供确认机制、重传机制和流量控制，数据包可能丢失、重复或乱序到达接收方。。
     - <b>简单高效/低延迟</b>：没有复杂的控制机制，传输速度快，传输延迟较低，适用于实时性要求高的应用，如视频会议、在线游戏等。
     - <b>数据报文</b>：UDP 将数据分成独立的报文，每个报文包含完整的数据单元。
   - 应用场景：适用于<b>对实时性要求高</b>、对可靠性要求低的应用，如实时音视频会议、在线游戏、实时聊天、直播流媒体、网络广播或多播（例如 DHCP 和 DNS 查询）等。

3. 区别
   | 特性 | TCP | UDP |
   | :--: | :--: | :--: |
   | 连接类型 | 面向连接 | 无连接 |
   | 传输可靠性 | 可靠传输，确保数据包顺序且无误到达 | 不可靠传输，数据包可能丢失、重复或乱序 |
   | 流量控制 | 流量控制，滑动窗口机制 | 无 |
   | 拥塞控制 | 拥塞控制，慢开始、拥塞避免、快重传、快恢复 | 无 |
   | 传输速度 | 较慢，由于建立连接和可靠性开销 | 较慢，由于无连接和无可靠性开销 |
   | 数据传输单位 | 数据流 | 数据报文 |
   | 头部开销 | 较高（20 字节） | 较低（8 字节） |
   | 应用场景 | 对数据传输可靠性要求高的应用 | 对实时性要求高、对可靠性要求低的应用 |

::: tip 总结
TCP 和 UDP 是两种不同的传输层协议，它们在数据传输过程中有不同的特点和应用场景。TCP 提供可靠的数据传输，适用于对数据传输可靠性要求高的应用，而 UDP 则适用于对实时性要求高、对可靠性要求低的应用。选择哪种协议取决于具体的应用需求。
:::

## 4. 说一下 GET 和 POST 的区别？

1. <b>数据传输方式</b>：

   - GET：将数据附加在 URL 后面，通过查询字符串的形式进行传递。
   - POST：将数据放在请求体中，通过 HTTP 请求体进行传递。

2. <b>数据大小限制</b>：

   - GET：URL 有长度限制，通常为 `2048` 个字符，因此数据大小有限制。
   - POST：数据大小没有限制，取决于服务器的配置。

3. <b>安全性</b>：

   - GET：数据在 URL 中可见，容易被记录在浏览器历史记录或服务器日志中，不安全，不适合传递敏感信息。
   - POST：数据在请求体中，不易被记录，相对安全，但仍需使用 `HTTPS` 确保数据传输的安全性。

4. <b>缓存</b>：

   - GET：浏览器主动缓存。
   - POST：不会被浏览器主动缓存，除非手动设置。

5. <b>幂等性</b>：

   - GET：幂等操作，多次请求结果相同，不会对服务器资源进行修改。
   - POST：非幂等操作，多次请求结果可能不同，例如多次提交表单可能会创建多个资源。

6. <b>用途</b>：

   - GET：通常用于获取数据，如查询、搜索等。
   - POST：通常用于提交数据，如表单提交、文件上传等。

7. <b>参数位置</b>：

   - GET 参数包含在 URL 中，作为查询字符串的一部分。例如：`http://example.com/api/resource?param1=value1&param2=value2`。
   - POST 参数包含在请求体（body）中

8. <b>数据包</b>：

   - GET 浏览器会把 http header 和 data 一并发送出去，服务器响应 200（返回数据）。
   - POST，浏览器先发送 header，服务器响应 100 continue，浏览器再发送 data，服务器响应 200（返回数据）。

   ::: warning 注意
   并不是所有浏览器都会在 POST 请求中发送两次请求，有些浏览器可能会在第一次请求中发送所有数据，而有些服务器可能会在收到第一次请求后立即响应，而不需要等待第二次请求。Firefox 就只发送一次。
   :::

::: tip 总结
GET 和 POST 是两种常见的 HTTP 请求方法，它们在数据传输方式、数据大小限制、安全性、缓存、幂等性和用途等方面有所不同。在选择使用哪种方法时，应根据数据的传输方式、数据量、安全性需求等因素进行权衡。
:::

## 5. 说说 TCP 为什么需要三次握手和四次挥手？

> TCP（Transmission Control Protocol，传输控制协议）是一种面向连接的协议，为了确保数据的可靠传输，需要进行连接的建立和终止。TCP 的三次握手和四次挥手过程确保了通信双方都能可靠地建立和终止连接。

1.  三次握手（Three-Way Handshake）

    三次握手其实就是在建立一个 TCP 连接时，需要客户端和服务器总共发送 3 个包。目的是建立可靠的 TCP 连接，<b>确保双方都有能力发送和接收数据、指定自己的初始化序列号为后面的可靠性传输做准备</b>。具体步骤如下：

    - 第一次握手：

      - 客户端发送一个带有 SYN 标志位的 TCP 报文段给服务器，并指明客户端的初始化序列号 ISN(c)，此时客户端处于 SYN_SENT 状态。
      - SYN（Synchronize Sequence Numbers）表示请求建立连接。

    - 第二次握手：

      - 服务器收到客户端的 SYN 报文段，会以自己的 SYN 报文应答，为了确认客户端的 SYN，将客户端的 ISN + 1 作为 ACK 的值，此时服务器属于 SYN_RCVD 的状态。

    - 第三次握手：

      - 客户端收到服务器的 SYN + ACK 报文段，会发送一个 ACK 报文，值为服务器的 ISN + 1。此时客户端处于 ESTABLISHED 状态，服务器收到 ACK 报文后也处于 ESTABLISHED 状态，连接建立成功。

::: warning 为什么不是两次握手？

- 如果是两次握手，<b>服务器无法确认客户端的接收能力</b>（客户端是否已经准备好接收数据）。

:::

2.  四次挥手（Four-Way Handshake）

    四次挥手的目的是可靠地终止 TCP 连接，确保双方都能正确地完成数据传输并关闭连接。具体步骤如下：

    - 第一次挥手：

      - 客户端发送一个带有 FIN 标志位的 TCP 报文段给服务器，表示客户端要终止连接。
      - FIN（Finish）表示发送方没有数据要发送了，但仍然可以接收数据。

    - 第二次挥手：

      - 服务器收到客户端的 FIN 报文段，确认请求。
      - 服务器发送一个带有 ACK 标志位的 TCP 报文段给客户端，确认客户端的 FIN，即 ACK = 客户端的序列号 + 1。
      - 此时，客户端到服务器的数据传输方向已经关闭，服务器仍然可以发送数据到客户端。

    - 第三次挥手：

      - 服务器准备终止连接，发送一个带有 FIN 标志位的 TCP 报文段给客户端。
      - 服务器告知客户端没有数据要发送了。

    - 第四次挥手：

      - 客户端收到服务器的 FIN 报文段，确认请求。
      - 客户端发送一个带有 ACK 标志位的 TCP 报文段给服务器，确认服务器的 FIN，即 ACK = 服务器的序列号 + 1。
      - 客户端等待一段时间（通常是 2 倍的最大报文段寿命，称为 TIME-WAIT 状态）以确保服务器收到 ACK 报文段，然后关闭连接。

::: tip 总结
TCP 的三次握手和四次挥手过程确保了通信双方都能可靠地建立和终止连接。三次握手确保双方都有能力发送和接收数据，四次挥手确保双方都能正确地完成数据传输并关闭连接。
:::

## 6. 说说地址栏输入 URL 敲下回车后发生了什么？

## 7. 说说 HTTP 常见的请求头有哪些？作用？

## 8. 说说 HTTP 常见的状态码有哪些，适用场景？

## 9. 说说 HTTP1.0/1.1/2.0 的区别？

## 10. 什么是 HTTP？HTTP 和 HTTPS 的区别？

## 11. 为什么说 HTTPS 比 HTTP 安全？HTTPS 是如何保证安全的？

## 12. 说说 TCP 为什么需要三次握手和四次握手？

## 13. DNS 协议是什么？说说 DNS 完整的查询过程？

## 14. 说说对 WebSocket 的理解？应用场景？

## 15. 说说对 HTTP 缓存的了解？缓存头有哪些？

## 16. 说说对 HTTP 强缓存和协商缓存的了解？哪些头信息相关？

## 17. 说说对 HTTP2.0 的理解？特性有哪些？

## 18. 说说对 HTTP3.0 的理解？特性有哪些？
